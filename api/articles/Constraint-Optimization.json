{"title":"Constraint-Optimization","slug":"Constraint-Optimization","date":"2020-09-10T08:51:09.000Z","updated":"2022-07-10T14:40:07.650Z","comments":true,"path":"api/articles/Constraint-Optimization.json","realPath":null,"excerpt":null,"covers":["https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899744-ea5ecfba-8939-4123-ad2d-4b184dd8fd61.png#align=left&display=inline&height=240&margin=%5Bobject%20Object%5D&originHeight=240&originWidth=553&size=0&status=done&style=none&width=553","https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899519-8ce7a1aa-7905-4f47-a746-34ab1e94a4b4.png#align=left&display=inline&height=220&margin=%5Bobject%20Object%5D&originHeight=220&originWidth=527&size=0&status=done&style=none&width=527"],"cover":"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899744-ea5ecfba-8939-4123-ad2d-4b184dd8fd61.png#align=left&display=inline&height=240&margin=%5Bobject%20Object%5D&originHeight=240&originWidth=553&size=0&status=done&style=none&width=553","content":"<a id=\"more\"></a>\n\n<h1 id=\"约束优化\"><a href=\"#约束优化\" class=\"headerlink\" title=\"约束优化\"></a>约束优化</h1><p>matlab 有几种命令可以求解</p>\n<ul>\n<li><p><code>linprog</code>求一次线性规划</p>\n</li>\n<li><p><code>quadprog</code>求二次规划问题</p>\n</li>\n</ul>\n<blockquote>\n<p>书上的方法是将二次规划问题改写成极小化标准形式，获得二次型黑塞矩阵（我没看懂），留一个坑<br>黑塞矩阵：是一个多元函数的二阶偏导数构成的方阵，描述了函数的局部曲率。</p>\n</blockquote>\n<p>一些概念重温<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899744-ea5ecfba-8939-4123-ad2d-4b184dd8fd61.png#align=left&display=inline&height=240&margin=%5Bobject%20Object%5D&originHeight=240&originWidth=553&size=0&status=done&style=none&width=553\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899696-595c2346-2f07-4865-b9ab-f3f5bfda9e63.png#align=left&display=inline&height=705&margin=%5Bobject%20Object%5D&originHeight=705&originWidth=930&size=0&status=done&style=none&width=930\"><br>黑塞矩阵说白了应该就是对每个变量分别求两次偏导得到的对称正定矩阵。<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727898787-641f0c87-8344-4f35-8e18-079894f66db9.png#align=left&display=inline&height=336&margin=%5Bobject%20Object%5D&originHeight=336&originWidth=734&size=0&status=done&style=none&width=734\"></p>\n<h2 id=\"linprog语法\"><a href=\"#linprog语法\" class=\"headerlink\" title=\"linprog语法\"></a><code>linprog</code>语法</h2><p><code>x = linprog(f,A,b)``x = linprog(f,A,b,Aeq,beq)``x = linprog(f,A,b,Aeq,beq,lb,ub)``x = linprog(f,A,b,Aeq,beq,lb,ub,options)``x = linprog(problem)``[x,fval] = linprog(___)``[x,fval,exitflag,output] = linprog(___)``[x,fval,exitflag,output,lambda] = linprog(___)</code></p>\n<h3 id=\"详细描述\"><a href=\"#详细描述\" class=\"headerlink\" title=\"详细描述\"></a>详细描述</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899519-8ce7a1aa-7905-4f47-a746-34ab1e94a4b4.png#align=left&display=inline&height=220&margin=%5Bobject%20Object%5D&originHeight=220&originWidth=527&size=0&status=done&style=none&width=527\"></p>\n<h3 id=\"生产销售规划\"><a href=\"#生产销售规划\" class=\"headerlink\" title=\"生产销售规划\"></a>生产销售规划</h3><p>%可以直接把系数及约束条件都直接用矩阵表示而不是再写一个函数<br>c = [12 8 22-1.5/0.8 16-1.5/0.75];<br>A = [1/3 1/4 1/2.4 1/3;4 2 6/0.8 16/3;1 0 1/0.8 0];<br>b = [50;480;100];<br>v1 = [0,0,0,0];<br>[x,fval] = linprog(-c,A,b,[],[],v1);<br>对应的式子就不写了…不过在设变量的时候尽量设多一点，否则有些量之间存在因果关系的在约束的时候有可能考虑不周。<br>灵敏度分析，则 LINGO 还会输出以下结果：</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">RANGES IN WHICH THE BASIS IS UNCHANGED:<br><br> OBJCOEFFICIENTRANGES  VARIABLE      CURRENT                ALLOWABLE          ALLOWABLE<br><br>                     COEF           INCREASE         DECREASE<br><br>       X1           <span class=\"hljs-number\">72.000000</span>         <span class=\"hljs-number\">24.000000</span>            <span class=\"hljs-number\">8.000000</span><br><br>       X2           <span class=\"hljs-number\">64.000000</span>          <span class=\"hljs-number\">8.000000</span>           <span class=\"hljs-number\">16.000000</span><br><br>                           RIGHTHANDSIDERANGES<br><br>      ROW        CURRENT        ALLOWABLE       ALLOWABLE<br><br>                     RHS            INCREASE         DECREASE<br><br>        <span class=\"hljs-number\">2</span>            <span class=\"hljs-number\">50.000000</span>         <span class=\"hljs-number\">10.000000</span>          <span class=\"hljs-number\">6.666667</span><br><br>        <span class=\"hljs-number\">3</span>          <span class=\"hljs-number\">480.000000</span>         <span class=\"hljs-number\">53.333332</span>          <span class=\"hljs-number\">80.000000</span><br><br>        <span class=\"hljs-number\">4</span>          <span class=\"hljs-number\">100.000000</span>         INFINITY          <span class=\"hljs-number\">40.000000</span><br></code></pre></td></tr></table></figure>\n\n<p>以上显示的是当前最优基（矩阵）保持不变的充分条件（RANGES IN WHICH THE BASIS IS UNCHANGED），包括目标函数中决策变量应的系数的变化范围（OBJ COEFFICIENT RANGES）和约束的右端项的变化范围（RIGHTHAND SIDE RANGES）两部分。<br>前一部分的输出行<br><code>X1 72.000000 24.000000 8.000000</code><br>表示决策变量 X1 当前在目标函数中对应的系数为 72，允许增加 24 和减少 8。也就是说，当该系数在区间[64，96]上变化时（假设其它条件均不变），当前最优基矩阵保持不变。对 X2 对应的输出行也可以类似地解释。由于此时约束没有任何改变，所以最优基矩阵保持不变意味着最优解不变（当然，由于目标函数中的系数发生变化，最优值还是会变的）。<br>后一部分的输出行<br><code>X2 50.000000 10.000000 6.666667</code><br>表示约束 2 当前右端项为 50，允许增加 10 和减少 6.666667。也就是说，当该系数在区间[43.333333，60]上变化时（假设其它条件均不变），当前最优基矩阵保持不变。对约束 3、约束 4 对应的输出行也可以类似地解释。由于此时约束已经改变，虽然最优基矩阵保持不变，最优解和最优值还是会变的。但是，由于最优基矩阵保持不变，所以前面的“DUAL PRICES”给出的约束的影子价格此时仍然是有效的。<br>题目的后几问是更细致的投资问题，答案使用了 Lagrange 乘子，这里我并不了解，先挖一个坑</p>\n<h2 id=\"quadprog语法\"><a href=\"#quadprog语法\" class=\"headerlink\" title=\"quadprog语法\"></a><code>quadprog</code>语法</h2><p><code>x = quadprog(H,f)``x = quadprog(H,f,A,b)``x = quadprog(H,f,A,b,Aeq,beq)``x = quadprog(H,f,A,b,Aeq,beq,lb,ub)``x = quadprog(H,f,A,b,Aeq,beq,lb,ub,x0)</code></p>\n<ul>\n<li><p>H 是目标函数 Hesse 矩阵</p>\n</li>\n<li><p>f 是目标函数线性项系数列向量 <strong>（线性项即单变量一次项）</strong></p>\n</li>\n<li><p>A 是不等式约束系数矩阵（不等式都要化成<strong>左边 x 项常数</strong>）</p>\n</li>\n<li><p>b 是不等式约束列向量</p>\n</li>\n<li><p>Aeq 是等式约束系数矩阵，如</p>\n</li>\n<li><p>beq 是等式约束列向量</p>\n</li>\n<li><p>lb 是 Lower bounds, specified as a real vector or real array. If the number of elements in x0 is equal to the number of elements in lb, then lb specifies that for all i.<strong>即下界列向量</strong></p>\n</li>\n<li><p>ub 是<strong>上界列向量</strong></p>\n</li>\n</ul>\n<p><code>x = quadprog(H,f,A,b,Aeq,beq,lb,ub,x0,options)``x = quadprog(problem)``[x,fval] = quadprog(___)``[x,fval,exitflag,output] = quadprog(___)``[x,fval,exitflag,output,lambda] = quadprog(___)</code></p>\n<h2 id=\"实战–水库供水–Lingo-初探\"><a href=\"#实战–水库供水–Lingo-初探\" class=\"headerlink\" title=\"实战–水库供水–Lingo 初探\"></a>实战–水库供水–Lingo 初探</h2><figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">model:<br>title TRanWater;<br>sets:<br>demand/<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>/:a,d;!四个小区，其实意味着a,d的范围是从<span class=\"hljs-number\">1</span>到<span class=\"hljs-number\">4</span><br>supply/<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>/:b;!三个供应站<br>link(supply,demand):c,x;!这个意味着c和x是二维数组，即c(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)和x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>),其中<span class=\"hljs-built_in\">i</span>是supply的范围<span class=\"hljs-number\">1</span>~<span class=\"hljs-number\">3</span>，<span class=\"hljs-built_in\">j</span>是demand范围<span class=\"hljs-number\">1</span>~<span class=\"hljs-number\">4</span><br>endsets<br>data:<br>!demand;<br>a = <span class=\"hljs-number\">30</span>,<span class=\"hljs-number\">70</span>,<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">10</span>;!基本用水;<br>d = <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">140</span>,<span class=\"hljs-number\">30</span>,<span class=\"hljs-number\">50</span>;!最多用水;<br>!supply;<br>b = <span class=\"hljs-number\">100</span>,<span class=\"hljs-number\">120</span>,<span class=\"hljs-number\">100</span>;<span class=\"hljs-comment\">%供应能力</span><br>c = <span class=\"hljs-number\">160</span>,<span class=\"hljs-number\">130</span>,<span class=\"hljs-number\">220</span>,<span class=\"hljs-number\">170</span><br>     <span class=\"hljs-number\">140</span>,<span class=\"hljs-number\">130</span>,<span class=\"hljs-number\">190</span>,<span class=\"hljs-number\">150</span><br>     <span class=\"hljs-number\">190</span>,<span class=\"hljs-number\">200</span>,<span class=\"hljs-number\">230</span>,<span class=\"hljs-number\">100000</span>;!管理费;<br>enddata<br>[obj]<span class=\"hljs-built_in\">max</span> = @sum(link(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>):<span class=\"hljs-number\">450</span>*x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)-c(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)*x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>));!没搞懂这句话！！！！！;<br>@FOR(demand(<span class=\"hljs-built_in\">j</span>):[DEMAND_CONmin]@sum(supply(<span class=\"hljs-built_in\">i</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&gt;=a(<span class=\"hljs-built_in\">j</span>););!约束条件一<br>@FOR(demand(<span class=\"hljs-built_in\">j</span>):[DEMAND_CONmax]@sum(supply(<span class=\"hljs-built_in\">i</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&lt;=d(<span class=\"hljs-built_in\">j</span>););<br>@FOR(supply(<span class=\"hljs-built_in\">i</span>):[SUPPLY_CON]@sum(demand(<span class=\"hljs-built_in\">j</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&lt;=b(<span class=\"hljs-built_in\">i</span>););<br><span class=\"hljs-keyword\">end</span><br>输出<br>Global optimal solution found.<br>Objective value:                              <span class=\"hljs-number\">88700.00</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">100.0000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">40.00000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">30.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">40.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">10.00000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">50.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">50.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">30.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">99800.004444</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"实战-2–圈地模型\"><a href=\"#实战-2–圈地模型\" class=\"headerlink\" title=\"实战 2–圈地模型\"></a>实战 2–圈地模型</h2><p>果然 lingo 求解多变量线性规划简单。</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">model:<br>Max = <span class=\"hljs-number\">0.09</span>*(L1*L2+L3*L4);<br><span class=\"hljs-number\">0.09</span>*L1*L2&gt;=<span class=\"hljs-number\">1000</span>;<br><span class=\"hljs-number\">0.09</span>*L3*L4&gt;=<span class=\"hljs-number\">1000</span>;<br>h1&gt;=<span class=\"hljs-number\">20</span>;<br>h2&gt;=<span class=\"hljs-number\">20</span>;<br><span class=\"hljs-number\">2</span>*(h1*L1+h1*L2+h2*L3+h2*L4)&lt;=<span class=\"hljs-number\">100000</span>;<br><span class=\"hljs-keyword\">end</span><br>完全直译即可。输出<br>Variable           Value        Reduced Cost<br>L1        <span class=\"hljs-number\">1144.591</span>            <span class=\"hljs-number\">0.000000</span><br>L2        <span class=\"hljs-number\">1144.591</span>            <span class=\"hljs-number\">0.000000</span><br>L3        <span class=\"hljs-number\">105.4093</span>            <span class=\"hljs-number\">0.000000</span><br>L4        <span class=\"hljs-number\">105.4093</span>            <span class=\"hljs-number\">0.000000</span><br>H1        <span class=\"hljs-number\">20.00000</span>            <span class=\"hljs-number\">0.000000</span><br>H2        <span class=\"hljs-number\">20.00000</span>            <span class=\"hljs-number\">0.000000</span><br><br>Row    Slack or Surplus      Dual Price<br><span class=\"hljs-number\">1</span>        <span class=\"hljs-number\">118907.9</span>            <span class=\"hljs-number\">1.000000</span><br><span class=\"hljs-number\">2</span>        <span class=\"hljs-number\">116907.9</span>            <span class=\"hljs-number\">0.000000</span><br><span class=\"hljs-number\">3</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-9.858541</span><br><span class=\"hljs-number\">4</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-11790.79</span><br><span class=\"hljs-number\">5</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-1085.854</span><br><span class=\"hljs-number\">6</span>        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">2.575329</span><br></code></pre></td></tr></table></figure>\n","more":"<h1 id=\"约束优化\"><a href=\"#约束优化\" class=\"headerlink\" title=\"约束优化\"></a>约束优化</h1><p>matlab 有几种命令可以求解</p>\n<ul>\n<li><p><code>linprog</code>求一次线性规划</p>\n</li>\n<li><p><code>quadprog</code>求二次规划问题</p>\n</li>\n</ul>\n<blockquote>\n<p>书上的方法是将二次规划问题改写成极小化标准形式，获得二次型黑塞矩阵（我没看懂），留一个坑<br>黑塞矩阵：是一个多元函数的二阶偏导数构成的方阵，描述了函数的局部曲率。</p>\n</blockquote>\n<p>一些概念重温<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899744-ea5ecfba-8939-4123-ad2d-4b184dd8fd61.png#align=left&display=inline&height=240&margin=%5Bobject%20Object%5D&originHeight=240&originWidth=553&size=0&status=done&style=none&width=553\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899696-595c2346-2f07-4865-b9ab-f3f5bfda9e63.png#align=left&display=inline&height=705&margin=%5Bobject%20Object%5D&originHeight=705&originWidth=930&size=0&status=done&style=none&width=930\"><br>黑塞矩阵说白了应该就是对每个变量分别求两次偏导得到的对称正定矩阵。<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727898787-641f0c87-8344-4f35-8e18-079894f66db9.png#align=left&display=inline&height=336&margin=%5Bobject%20Object%5D&originHeight=336&originWidth=734&size=0&status=done&style=none&width=734\"></p>\n<h2 id=\"linprog语法\"><a href=\"#linprog语法\" class=\"headerlink\" title=\"linprog语法\"></a><code>linprog</code>语法</h2><p><code>x = linprog(f,A,b)``x = linprog(f,A,b,Aeq,beq)``x = linprog(f,A,b,Aeq,beq,lb,ub)``x = linprog(f,A,b,Aeq,beq,lb,ub,options)``x = linprog(problem)``[x,fval] = linprog(___)``[x,fval,exitflag,output] = linprog(___)``[x,fval,exitflag,output,lambda] = linprog(___)</code></p>\n<h3 id=\"详细描述\"><a href=\"#详细描述\" class=\"headerlink\" title=\"详细描述\"></a>详细描述</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/1629942/1599727899519-8ce7a1aa-7905-4f47-a746-34ab1e94a4b4.png#align=left&display=inline&height=220&margin=%5Bobject%20Object%5D&originHeight=220&originWidth=527&size=0&status=done&style=none&width=527\"></p>\n<h3 id=\"生产销售规划\"><a href=\"#生产销售规划\" class=\"headerlink\" title=\"生产销售规划\"></a>生产销售规划</h3><p>%可以直接把系数及约束条件都直接用矩阵表示而不是再写一个函数<br>c = [12 8 22-1.5/0.8 16-1.5/0.75];<br>A = [1/3 1/4 1/2.4 1/3;4 2 6/0.8 16/3;1 0 1/0.8 0];<br>b = [50;480;100];<br>v1 = [0,0,0,0];<br>[x,fval] = linprog(-c,A,b,[],[],v1);<br>对应的式子就不写了…不过在设变量的时候尽量设多一点，否则有些量之间存在因果关系的在约束的时候有可能考虑不周。<br>灵敏度分析，则 LINGO 还会输出以下结果：</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">RANGES IN WHICH THE BASIS IS UNCHANGED:<br><br> OBJCOEFFICIENTRANGES  VARIABLE      CURRENT                ALLOWABLE          ALLOWABLE<br><br>                     COEF           INCREASE         DECREASE<br><br>       X1           <span class=\"hljs-number\">72.000000</span>         <span class=\"hljs-number\">24.000000</span>            <span class=\"hljs-number\">8.000000</span><br><br>       X2           <span class=\"hljs-number\">64.000000</span>          <span class=\"hljs-number\">8.000000</span>           <span class=\"hljs-number\">16.000000</span><br><br>                           RIGHTHANDSIDERANGES<br><br>      ROW        CURRENT        ALLOWABLE       ALLOWABLE<br><br>                     RHS            INCREASE         DECREASE<br><br>        <span class=\"hljs-number\">2</span>            <span class=\"hljs-number\">50.000000</span>         <span class=\"hljs-number\">10.000000</span>          <span class=\"hljs-number\">6.666667</span><br><br>        <span class=\"hljs-number\">3</span>          <span class=\"hljs-number\">480.000000</span>         <span class=\"hljs-number\">53.333332</span>          <span class=\"hljs-number\">80.000000</span><br><br>        <span class=\"hljs-number\">4</span>          <span class=\"hljs-number\">100.000000</span>         INFINITY          <span class=\"hljs-number\">40.000000</span><br></code></pre></td></tr></table></figure>\n\n<p>以上显示的是当前最优基（矩阵）保持不变的充分条件（RANGES IN WHICH THE BASIS IS UNCHANGED），包括目标函数中决策变量应的系数的变化范围（OBJ COEFFICIENT RANGES）和约束的右端项的变化范围（RIGHTHAND SIDE RANGES）两部分。<br>前一部分的输出行<br><code>X1 72.000000 24.000000 8.000000</code><br>表示决策变量 X1 当前在目标函数中对应的系数为 72，允许增加 24 和减少 8。也就是说，当该系数在区间[64，96]上变化时（假设其它条件均不变），当前最优基矩阵保持不变。对 X2 对应的输出行也可以类似地解释。由于此时约束没有任何改变，所以最优基矩阵保持不变意味着最优解不变（当然，由于目标函数中的系数发生变化，最优值还是会变的）。<br>后一部分的输出行<br><code>X2 50.000000 10.000000 6.666667</code><br>表示约束 2 当前右端项为 50，允许增加 10 和减少 6.666667。也就是说，当该系数在区间[43.333333，60]上变化时（假设其它条件均不变），当前最优基矩阵保持不变。对约束 3、约束 4 对应的输出行也可以类似地解释。由于此时约束已经改变，虽然最优基矩阵保持不变，最优解和最优值还是会变的。但是，由于最优基矩阵保持不变，所以前面的“DUAL PRICES”给出的约束的影子价格此时仍然是有效的。<br>题目的后几问是更细致的投资问题，答案使用了 Lagrange 乘子，这里我并不了解，先挖一个坑</p>\n<h2 id=\"quadprog语法\"><a href=\"#quadprog语法\" class=\"headerlink\" title=\"quadprog语法\"></a><code>quadprog</code>语法</h2><p><code>x = quadprog(H,f)``x = quadprog(H,f,A,b)``x = quadprog(H,f,A,b,Aeq,beq)``x = quadprog(H,f,A,b,Aeq,beq,lb,ub)``x = quadprog(H,f,A,b,Aeq,beq,lb,ub,x0)</code></p>\n<ul>\n<li><p>H 是目标函数 Hesse 矩阵</p>\n</li>\n<li><p>f 是目标函数线性项系数列向量 <strong>（线性项即单变量一次项）</strong></p>\n</li>\n<li><p>A 是不等式约束系数矩阵（不等式都要化成<strong>左边 x 项常数</strong>）</p>\n</li>\n<li><p>b 是不等式约束列向量</p>\n</li>\n<li><p>Aeq 是等式约束系数矩阵，如</p>\n</li>\n<li><p>beq 是等式约束列向量</p>\n</li>\n<li><p>lb 是 Lower bounds, specified as a real vector or real array. If the number of elements in x0 is equal to the number of elements in lb, then lb specifies that for all i.<strong>即下界列向量</strong></p>\n</li>\n<li><p>ub 是<strong>上界列向量</strong></p>\n</li>\n</ul>\n<p><code>x = quadprog(H,f,A,b,Aeq,beq,lb,ub,x0,options)``x = quadprog(problem)``[x,fval] = quadprog(___)``[x,fval,exitflag,output] = quadprog(___)``[x,fval,exitflag,output,lambda] = quadprog(___)</code></p>\n<h2 id=\"实战–水库供水–Lingo-初探\"><a href=\"#实战–水库供水–Lingo-初探\" class=\"headerlink\" title=\"实战–水库供水–Lingo 初探\"></a>实战–水库供水–Lingo 初探</h2><figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">model:<br>title TRanWater;<br>sets:<br>demand/<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>,<span class=\"hljs-number\">4</span>/:a,d;!四个小区，其实意味着a,d的范围是从<span class=\"hljs-number\">1</span>到<span class=\"hljs-number\">4</span><br>supply/<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">2</span>,<span class=\"hljs-number\">3</span>/:b;!三个供应站<br>link(supply,demand):c,x;!这个意味着c和x是二维数组，即c(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)和x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>),其中<span class=\"hljs-built_in\">i</span>是supply的范围<span class=\"hljs-number\">1</span>~<span class=\"hljs-number\">3</span>，<span class=\"hljs-built_in\">j</span>是demand范围<span class=\"hljs-number\">1</span>~<span class=\"hljs-number\">4</span><br>endsets<br>data:<br>!demand;<br>a = <span class=\"hljs-number\">30</span>,<span class=\"hljs-number\">70</span>,<span class=\"hljs-number\">10</span>,<span class=\"hljs-number\">10</span>;!基本用水;<br>d = <span class=\"hljs-number\">80</span>,<span class=\"hljs-number\">140</span>,<span class=\"hljs-number\">30</span>,<span class=\"hljs-number\">50</span>;!最多用水;<br>!supply;<br>b = <span class=\"hljs-number\">100</span>,<span class=\"hljs-number\">120</span>,<span class=\"hljs-number\">100</span>;<span class=\"hljs-comment\">%供应能力</span><br>c = <span class=\"hljs-number\">160</span>,<span class=\"hljs-number\">130</span>,<span class=\"hljs-number\">220</span>,<span class=\"hljs-number\">170</span><br>     <span class=\"hljs-number\">140</span>,<span class=\"hljs-number\">130</span>,<span class=\"hljs-number\">190</span>,<span class=\"hljs-number\">150</span><br>     <span class=\"hljs-number\">190</span>,<span class=\"hljs-number\">200</span>,<span class=\"hljs-number\">230</span>,<span class=\"hljs-number\">100000</span>;!管理费;<br>enddata<br>[obj]<span class=\"hljs-built_in\">max</span> = @sum(link(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>):<span class=\"hljs-number\">450</span>*x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)-c(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>)*x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>));!没搞懂这句话！！！！！;<br>@FOR(demand(<span class=\"hljs-built_in\">j</span>):[DEMAND_CONmin]@sum(supply(<span class=\"hljs-built_in\">i</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&gt;=a(<span class=\"hljs-built_in\">j</span>););!约束条件一<br>@FOR(demand(<span class=\"hljs-built_in\">j</span>):[DEMAND_CONmax]@sum(supply(<span class=\"hljs-built_in\">i</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&lt;=d(<span class=\"hljs-built_in\">j</span>););<br>@FOR(supply(<span class=\"hljs-built_in\">i</span>):[SUPPLY_CON]@sum(demand(<span class=\"hljs-built_in\">j</span>):x(<span class=\"hljs-built_in\">i</span>,<span class=\"hljs-built_in\">j</span>))&lt;=b(<span class=\"hljs-built_in\">i</span>););<br><span class=\"hljs-keyword\">end</span><br>输出<br>Global optimal solution found.<br>Objective value:                              <span class=\"hljs-number\">88700.00</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">100.0000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">40.00000</span><br>X( <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">30.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">40.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">10.00000</span><br>X( <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">50.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">1</span>)        <span class=\"hljs-number\">50.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">2</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">20.00000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">3</span>)        <span class=\"hljs-number\">30.00000</span>            <span class=\"hljs-number\">0.000000</span><br>X( <span class=\"hljs-number\">3</span>, <span class=\"hljs-number\">4</span>)        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">99800.004444</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"实战-2–圈地模型\"><a href=\"#实战-2–圈地模型\" class=\"headerlink\" title=\"实战 2–圈地模型\"></a>实战 2–圈地模型</h2><p>果然 lingo 求解多变量线性规划简单。</p>\n<figure class=\"highlight matlab\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs matlab\">model:<br>Max = <span class=\"hljs-number\">0.09</span>*(L1*L2+L3*L4);<br><span class=\"hljs-number\">0.09</span>*L1*L2&gt;=<span class=\"hljs-number\">1000</span>;<br><span class=\"hljs-number\">0.09</span>*L3*L4&gt;=<span class=\"hljs-number\">1000</span>;<br>h1&gt;=<span class=\"hljs-number\">20</span>;<br>h2&gt;=<span class=\"hljs-number\">20</span>;<br><span class=\"hljs-number\">2</span>*(h1*L1+h1*L2+h2*L3+h2*L4)&lt;=<span class=\"hljs-number\">100000</span>;<br><span class=\"hljs-keyword\">end</span><br>完全直译即可。输出<br>Variable           Value        Reduced Cost<br>L1        <span class=\"hljs-number\">1144.591</span>            <span class=\"hljs-number\">0.000000</span><br>L2        <span class=\"hljs-number\">1144.591</span>            <span class=\"hljs-number\">0.000000</span><br>L3        <span class=\"hljs-number\">105.4093</span>            <span class=\"hljs-number\">0.000000</span><br>L4        <span class=\"hljs-number\">105.4093</span>            <span class=\"hljs-number\">0.000000</span><br>H1        <span class=\"hljs-number\">20.00000</span>            <span class=\"hljs-number\">0.000000</span><br>H2        <span class=\"hljs-number\">20.00000</span>            <span class=\"hljs-number\">0.000000</span><br><br>Row    Slack or Surplus      Dual Price<br><span class=\"hljs-number\">1</span>        <span class=\"hljs-number\">118907.9</span>            <span class=\"hljs-number\">1.000000</span><br><span class=\"hljs-number\">2</span>        <span class=\"hljs-number\">116907.9</span>            <span class=\"hljs-number\">0.000000</span><br><span class=\"hljs-number\">3</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-9.858541</span><br><span class=\"hljs-number\">4</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-11790.79</span><br><span class=\"hljs-number\">5</span>        <span class=\"hljs-number\">0.000000</span>           <span class=\"hljs-number\">-1085.854</span><br><span class=\"hljs-number\">6</span>        <span class=\"hljs-number\">0.000000</span>            <span class=\"hljs-number\">2.575329</span><br></code></pre></td></tr></table></figure>","categories":[{"name":"数学建模","path":"api/categories/数学建模.json"}],"tags":[{"name":"约束优化","path":"api/tags/约束优化.json"},{"name":"lingo","path":"api/tags/lingo.json"}]}